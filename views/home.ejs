<%- include("partials/header.ejs") %>
<body>
    <div class="gradient-background py-5">
        <div class="px-4 pb-5 my-5 text-center">
            <h1 class="display-5"><img class="mx-auto mb-4" src="../images/blog.png" alt="An image" height="57"> Blog Web</h1>
            <form action="/newpost" method="post">
                <div class="col-lg-6 mx-auto">
                    <div class="input-group mb-3">
                        <span class="input-group-text">Author</span>
                        <input name="author" type="text" class="form-control" placeholder="Author">
                        <span class="input-group-text">Subject</span>
                        <input name="subject" type="text" class="form-control" placeholder="Subject">
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text">Content</span>
                        <textarea name="post" class="form-control"></textarea>
                    </div>
                    <div class="d-grid d-sm-flex justify-content-sm-center">
                        <button type="submit" class="btn btn-success btn-lg px-4 gap-3">New Post</button>  
                    </div>
                    <% if (locals.success_m) { %>
                        <p id="suc"><%= success_m %></p>
                    <% }%>
                    <% if (locals.error) { %>
                            <p><%= error %></p>
                        <% }%>
                </div>
            </form>
        </div>
    </div>
    <div class="container px-5 py-5" id="featured-3">
        <h2 class="pb-2 border-bottom">
            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-chat-text" viewBox="0 0 16 16">
                <path d="M2.678 11.894a1 1 0 0 1 .287.801 11 11 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8 8 0 0 0 8 14c3.996 0 7-2.807 7-6s-3.004-6-7-6-7 2.808-7 6c0 1.468.617 2.83 1.678 3.894m-.493 3.905a22 22 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a10 10 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9 9 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105"/>
                <path d="M4 5.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8m0 2.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5"/>
            </svg> Posts</h2>
        <% if (locals.poste) {%>
            <% if (poste.length === 0) { %>
                <p class="pb-2"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-emoji-frown" viewBox="0 0 16 16">
                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                    <path d="M4.285 12.433a.5.5 0 0 0 .683-.183A3.5 3.5 0 0 1 8 10.5c1.295 0 2.426.703 3.032 1.75a.5.5 0 0 0 .866-.5A4.5 4.5 0 0 0 8 9.5a4.5 4.5 0 0 0-3.898 2.25.5.5 0 0 0 .183.683M7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5m4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5"/>
                  </svg> There is no post yet, start to create new post!</p>
            <% } else { %>
                <% for (var i = 0; i < poste.length; i++) { %> 
                    <div class="feature col pb-5 post<%= poste[i].id %>">
                        <h4><%= poste[i].subject %></h4>
                        <p><%= poste[i].post %></p>
                        <small class="form-text">Author: <%= poste[i].author %></small><br>
                        <small class="form-text"><%= poste[i].date %></small><br>
                        <a class="edit icon-link btn btn-success" id="edit<%= poste[i].id %>" href="/edit/<%= poste[i].id %>">Edit</a>
                        <a class="delete icon-link btn btn-danger" id="delete<%= poste[i].id %>" href="/delete/<%= poste[i].id %>">Delete</a>
                    </div>
          <% }} %>
        <% } %>       
    </div>   
</body>
<%- include("partials/footer.ejs") %>